{% extends 'admin/master.html' %} {% import 'admin/lib.html' as lib with context %} {% block body %} {% block navlinks %}
<ul class="nav nav-tabs">
    <li>
        <a href="{{ return_url }}">{{ _gettext('All Applicants') }}</a>
    </li>
    <li class="active">
        <a href="javascript:void(0)">{{ _gettext('Details') }}</a>
    </li>
    {%- if admin_view.can_edit -%}
    <li>
        <a href="{{ get_url('.edit_view', id=request.args.get('id'), url=return_url) }}">{{ _gettext('Edit') }}</a>
    </li>
    {%- endif -%}
</ul>
{% endblock %}
<div class="container-fluid">
    <div class="row">
        <h2 class="col-md-4 ">Applicant Details</h2>
    </div>
    <div class="row" id="applicant_details">
        <div class="col-md-4 col-centered">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col col-md-10">
                            <h4>Gro Score</h4>
                        </div>
                       <div class="col col-md-2">
                            <form>
                                <button class="btn btn-default" >
                                    <a href="" id="gro_score_button">
                                        <span class="glyphicon glyphicon-refresh" aria-hidden="true">
                                        </span>
                                    </a>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="col-md-2" style="
                      display: inline-block;
                      position: relative;
                      width: 210px;
                      height: 210px;
                      background: green;
                      border-radius: 50%;
                      text-align: center;
                      padding: 20% 0;
                      color:white;
                      font-size:40px">
                        <span id="gro_score">{{score.gro_score}}</span>
                    </div>
                    <div class="col-md-5">
                        <br>
                        <div>Data Score:</div>
                        <div>
                            <button 
                                  type="button"
                                  class="btn btn-primary" 
                                  name="refreshDataScore"
                                  type="submit"
                                >
                                <span id="data_score">{{score.data_score}}</span>
                                
                                </button>
                        </div>
                        <br><br>
                        <div>ML Score:</div>
                        <div>
                            <button type="button" class="btn btn-primary" name="refreshMLScore">
                                <span>
                                    {{score.ml_score}}
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h4>Company Info</h4></div>
                <div class="panel-body">
                    <div><b>Name:</b> {{company.company_name}}
                    </div>
                    <br>
                    <div><b>EIN:</b> {{company.ein}}
                    </div>
                    <br>
                    <div><b>DUNS</b>: {{company.duns}}</div>
                    <br>
                    <div><b>Address</b>:
                        <br>{{company.address}}, {{company.city}}, {{company.state}}, {{company.zipcode}}</div>
                    <br>
                    <div><b>Loan Amount Applied</b>:
                        <br>{{company.loan_amount_applied}}</div>
                    <br>
                    <div><b>Loan Type:</b>
                        <br>{{company.loan_type}}</div>
                    <br>
                    <div><b>Loan Reason</b>:
                        <br>{{company.loan_reason}}</div>
                    <br>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h4> Personal Info</h4>
                </div>
                <div class="panel-body">
                    <div class="media">
                        <img src="{{applicant.profile}}" width="50%">
                    </div>
                    <p>
                        <div>
                            <b>Name: </b> {{applicant.first_name}} {{applicant.last_name}}
                            <br>
                        </div>
                        <div>
                            <b>Email: </b>{{applicant.email}}
                            <br>
                        </div>
                        <div>
                            <b>Birthday:</b> {{applicant.birthday}}
                        </div>
                        <div>
                            <b>Driver License:</b> {{applicant.driverLicense}}
                            <br>
                        </div>
                        <div>
                            <b>Social Security Number:</b>{{applicant.ssn}}
                            <br>
                        </div>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="financial_report">
        <div class="col-md-4 col-xs-10">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col col-md-10">
                            <h4>Income Statement</h4>    
                        </div>
                        <div class="col col-md-2">
                            <!-- <form>
                                <button class="btn btn-default" >
                                    <a href="" id="income_statement_button">
                                        <span class="glyphicon glyphicon-refresh" aria-hidden="true">
                                        </span>
                                    </a>
                                </button>
                            </form> -->
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div>
                        {% for report in profit_loss_reports %}
                        <table class="table">
                            <th>
                                Report #{{report.id}}
                            </th>
                            <tr>
                                <td>Start Period</td>
                                <td>{{report.startPeriod}}</td>
                            </tr>
                            <tr>
                                <td>End Period</td>
                                <td>{{report.endPeriod}}</td>
                            </tr>
                            <tr>
                                <td>Income</td>
                                <td>{{report.income}}</td>
                            </tr>
                            <tr>
                                <td>Cost of Goods Sold</td>
                                <td>{{report.COGS}}</td>
                            </tr>
                            <tr>
                                <td>Gross Profit</td>
                                <td>{{report.grossProfit}}</td>
                            </tr>
                            <tr>
                                <td>Expenses</td>
                                <td>{{report.expenses}}</td>
                            </tr>
                            <tr>
                                <td>Net Operating Income</td>
                                <td>{{report.netOperatingIncome}}</td>
                            </tr>
                            <tr>
                                <td>otherExpenses</td>
                                <td>{{report.otherExpenses}}</td>
                            </tr>
                            <tr>
                                <td>Net Other Income</td>
                                <td>{{report.netOtherIncome}}</td>
                            </tr>
                            <tr>
                                <td>Net Income</td>
                                <td>{{report.netIncome}}</td>
                            </tr>
                        </table>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-xs-10">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col col-md-10">
                            <h4>Balance Sheet</h4>    
                        </div>
                        <div class="col col-md-2">
                           <!--  <form>
                                <button class="btn btn-default" >
                                    <a href="#" id="data_score_button">
                                        <span class="glyphicon glyphicon-refresh" aria-hidden="true">
                                        </span>
                                    </a>
                                </button>
                            </form> -->
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div>
                        {% for report in balance_sheet_reports %}
                        <table class="table">
                            <th>
                                Report #{{report.id}}
                            </th>
                            <tr>
                                <td>Start Period</td>
                                <td>{{report.startPeriod}}</td>
                            </tr>
                            <tr>
                                <td>End Period</td>
                                <td>{{report.endPeriod}}</td>
                            </tr>
                            <tr>
                                <td>Current Asset</td>
                                <td>{{report.current_asset}}</td>
                            </tr>
                            <tr>
                                <td>Fixed Asset</td>
                                <td>{{report.fixed_asset}}</td>
                            </tr>
                            <tr>
                                <td>Current Liability</td>
                                <td>{{report.current_liability}}</td>
                            </tr>
                            <tr>
                                <td>Longterm Liablity</td>
                                <td>{{report.longterm_liability}}</td>
                            </tr>
                            <tr>
                                <td>Equity</td>
                                <td>{{report.equity}}</td>
                            </tr>
                        </table>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-xs-10">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col col-md-10">
                            <h4>Cash Flow</h4>    
                        </div>
                        <div class="col col-md-2">
                            <!-- <form>
                                <button class="btn btn-default" >
                                    <a href="#" id="data_score_button">
                                        <span class="glyphicon glyphicon-refresh" aria-hidden="true">
                                        </span>
                                    </a>
                                </button>
                            </form> -->
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div>
                        {% for report in cash_flow_reports %}
                        <table class="table">
                            <th>Report: # {{report.id}}</th>
                            <tr>
                                <td>Start Period</td>
                                <td>{{report.startPeriod}}</td>
                            </tr>
                            <tr>
                                <td>End Period</td>
                                <td>{{report.endPeriod}}</td>
                            </tr>
                            <tr>
                                <td>Beginning Cash</td>
                                <td>{{report.beginningCash}}</td>
                            </tr>
                            <tr>
                                <td>Operating Net Cash</td>
                                <td>{{report.operatingNetCash}}</td>
                            </tr>
                            <tr>
                                <td>Investing Net Cash</td>
                                <td>{{report.investingNetCash}}</td>
                            </tr>
                            <tr>
                                <td>Financing Net Cash</td>
                                <td>{{report.financingNetCash}}</td>
                            </tr>
                            <tr>
                                <td>Ending Cash</td>
                                <td>{{report.endingCash}}</td>
                            </tr>
                        </table>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="machine learning inputs">
      <div class="col-md-12 col-xs-12">
        <div class="panel panel-primary">
            <div class="panel panel-heading">
                <div class="row">
                        <div class="col col-md-11">
                            <h4>Machine Learning Inputs</h4>    
                        </div>
                        <div class="col col-md-1">
                          <!--   <form>
                                <button class="btn btn-default" >
                                    <a href="#" id="data_score_button">
                                        <span class="glyphicon glyphicon-refresh" aria-hidden="true">
                                        </span>
                                    </a>
                                </button>
                            </form> -->
                        </div>
                    </div>
            </div>
            <div class="panel panel-body">
                <div class="col-md-3">
                    <h4>Annual Income<span class="label label-default"> {{ml_input.annual_income}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>Employment Length <span class="label label-default"> {{ml_input.emp_length}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>Debt to Income <span class="label label-default"> {{ml_input.debt_to_income}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>Average Current Balance <span class="label label-default"> {{ml_input.average_current_balance}} </span>
                  </h4>
                </div>
                <div class="col-md-3">
                    <h4>percentBcGt75 <span class="label label-default"> {{ml_input.percentBcGt75}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>bcUtil <span class="label label-default"> {{ml_input.bcUtil}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>openAcc <span class="label label-default"> {{ml_input.openAcc}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>totalBalExMort <span class="label label-default"> {{ml_input.totalBalExMort}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>revolBal <span class="label label-default"> {{ml_input.revolBal}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>totalBcLimit <span class="label label-default"> {{ml_input.totalBcLimit}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>totalIlHighCreditLimit <span class="label label-default"> {{ml_input.totalIlHighCreditLimit}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>totCurBal <span class="label label-default"> {{ml_input.totCurBal}} </span></h4>
                </div>
                <div class="col-md-3">
                    <h4>numBcTl  <span class="label label-default"> {{ml_input.numBcTl }}</span></h4>
                </div>
                 <div class="col-md-3">
                    <h4>numIlTl  <span class="label label-default"> {{ml_input.numIlTl }}</span></h4>
                </div>
                 <div class="col-md-3">
                    <h4>dtiJoint  <span class="label label-default"> {{ml_input.dtiJoint}}</span></h4>
                </div>
                 <div class="col-md-3">
                    <h4>totalBalIl <span class="label label-default"> {{ml_input.totalBalIl }}</span></h4>
                </div>
                 <div class="col-md-3">
                    <h4>iLUtil <span class="label label-default"> {{ml_input.iLUtil }}</span></h4>
                </div>
                 <div class="col-md-3">
                    <h4>mtgPayment <span class="label label-default"> {{ml_input.mtgPayment }}</span></h4>
                </div>
            </div>
        </div>
      </div>
    </div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    $(function(){
        $('a#gro_score_button').bind('click', function(){
            console.log("gro_score_button clicked");
            $.getJSON('/admin/loan_applicants/details/gro_score_update/?id={{applicant.id}}',
                function(data) {
                    $('#data_score').text(data['data_score']);
                    $('#ml_score').text(data['ml_score']);
                    $('#gro_score').text(data['gro_score']);
                    console.log(data);
                }
            )
            return false;
        });
        // $('a#income_statement_button').bind('click', function(){
        //     console.log("income_statement_button clicked");
        //     $.getJSON('/admin/loan_applicants/details/income_statement_update/?id={{applicant.id}}',
        //         function(data) {
        //             $('#data_score').text(data['data_score']);
        //             console.log(data);
        //         }
        //     )
        //     return false;
        // });
    });
</script>
{{ super() }} {% endblock %}